<div id="wrapper">
	<%= render 'dashboards/sidebar' %>

	<!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                    	<a href="#menu-toggle" class="btn btn-info btn-xs" id="menu-toggle">Toggle Menu</a>
                        <h1>List of All Users</h1>
                        <hr>
                        <table class="table table-striped table-hover ">
						  <thead>
						    <tr>
						      <th>#</th>
						      <th>Name</th>
						      <th>Email</th>
						      <th>Phone</th>
						      <th>City</th>
						      <th colspan="2"></th>
						    </tr>
						  </thead>
						  <tbody>
						  	<% @users.each do |user| %>
							    <tr>
							      <td><%= user.id %></td>
							      <td><%= user.name %></td>
							      <td><%= user.email %></td>
							      <td><%= user.telephone %></td>
							      <td><%= user.city %></td>
							      <td>
							      	<button type="button" class="btn btn-info" data-toggle="modal" data-target="#<%= user.id %>">
									  <i class="fa fa-info" aria-hidden="true"></i>
									</button>
							      </td>
							    </tr>

							    <!-- this is a modal window that gets opened on click above -->
							    <!-- Modal -->
								<div class="modal fade" id="<%= user.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								  <div class="modal-dialog" role="document">
								    <div class="modal-content">
								      <div class="modal-header">
								        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								        <h4 class="modal-title" id="myModalLabel">User: <%= user.name %></h4>
								      </div>
								      <div class="modal-body">
								        <div class="row">
								        	<div class="col-md-6">
								        		<h4>Email: </h4> <p><%= user.email %></p>
								        		<hr>
								        		<h4>Phone: </h4> <p><%= user.telephone %></p>
								        		<hr>
								        		<h4>Street: </h4> <p><%= user.street_address %></p>
								        		<hr>
								        		<% if user.unit_number.present? %>
								        			<h4>Unit: </h4> <p><%= user.unit_number %></p>
								        			<hr>
								        		<% end %>
								        		<% if user.buzzer_number.present? %>
								        			<h4>Buzzer #: </h4> <p><%= user.buzzer_number %></p>
								        			<hr>
								        		<% end %>
								        		<h4>City, Province &amp; Postal:: </h4> <p><%= user.city %>, <%= user.province %>, <%= user.postal_code %></p>
								        		<hr>
								        		<h4>Gender:</h4> <p>
								        		<% if user.is_female == true %>
								        			<p>Female</p>
								        		<% else %>
								        			<p>Male</p>
								        		<% end %>
								        	</div><!-- end col-md-6 -->
								        	<div class="col-md-6">
								        		<h4>Date of Birth:</h4> <p><%= user.date_of_birth.try(:strftime, '%B %d, %Y') %></p>
								        		<hr>
								        		<h4>Purchase Counter:</h4><p><%= user.orders.count %></p>
								        		<hr>
								        		<h4>Total $ Spent:</h4><p></p>
								        		<hr>
								        		<h4>Sign In Count:</h4><p><%= user.sign_in_count %></p>
								        		<hr>
								        		<h4>Last Signed In:</h4><p><%= user.last_sign_in_at.try(:strftime, '%A, %b %d') %></p>
								        	</div><!-- end col-md-6 -->
								        </div><!-- end row -->
								      </div>
								      <div class="modal-footer">
								        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
								      </div>
								    </div>
								  </div>
								</div>

						    <% end %>
						  </tbody>
						</table> 
			            
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->
</div><!-- end wrapper -->


<%= render 'dashboards/toggle_sidebar_script' %>